{% extends "header.html" %}
{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/qna.css') }}">
{% endblock %}

{% block section %}
{% if session['status']=="product" %}
{% include 'nav_product.html' %}
{% else %}
{% include 'nav_service.html' %}
{% endif %}

<section class="qna-container">
    <div class="qna-detail-container">
        <div class="qna-detail-header">
            <h2 class="qna-title">{{ post['item_name'] }}에 대한 게시글</h2>
            {% if post %}
                <h3>{{ post['title'] }}</h3>
                <p>작성자: {{ post['name'] }}</p>
                <p>작성 날짜: {{ post.date }}</p>
            {% endif %}
        </div>

        <div class="qna-detail-content">
            {{ post['content'] }}
        </div>

        <div style="margin-top: 20px;">
            <button id="modify" class="qna-btn">수정하기</button>
            <button id="delete" class="qna-btn">삭제하기</button>
            <button type="button" onclick="location.href='/board_list/{{ item_name }}/'" class="qna-btn">뒤로가기</button>
        </div>

        <!-- 댓글 섹션 -->
        <div class="qna-comments">
            <form id="commentForm" class="qna-comment-form" method="POST" action="{{ url_for('write_comment', item_name=item_name, post_key=post_key) }}">
                <textarea name="commentContent" class="qna-form-input qna-form-textarea" rows="3" placeholder="댓글을 입력하세요"></textarea>
                <input type="password" name="commentPassword" class="qna-form-input" placeholder="댓글 비밀번호를 입력하세요">
                <button type="submit" class="qna-btn">댓글 작성</button>
            </form>

            <table class="qna-table">
                <tr>
                    <th>작성자</th>
                    <th>내용</th>
                    <th>작성일</th>
                    <th>수정/삭제</th>
                </tr>
                {% for comment in comments %}
                    <tr>
                        <td>{{ comment['id'] }}</td>
                        <td>{{ comment['content'] }}</td>
                        <td>{{ comment['date'] }}</td>
                        <td>
                            <button class="qna-btn editCommentBtn" data-comment-id="{{ comment['comment_key'] }}">수정</button>
                            <button class="qna-btn deleteCommentBtn" data-comment-id="{{ comment['comment_key'] }}">삭제</button>
                        </td>
                    </tr>
                {% endfor %}
            </table>
        </div>
    </div>
</section>

<script>
// 기존 JavaScript 코드는 그대로 유지
</script>
{% endblock section %}